{% extends 'base.html' %}

{% block title %}Scoreboard{% endblock %}

{% block content %}
<h1>Scoreboard</h1>

<!-- Main Tabs -->
{% include 'scoreboard/tabs.html' %}

<!-- Scoreboard Tab Content -->
<div id="scoreboard" class="tabcontent">
    <div class="tab">
        <button class="subTablinks" id="classementTabButton" onclick="openSubTab(event, 'classement')">Classement</button>
        <button class="subTablinks" id="SprintTabButton"onclick="openSubTab(event, 'sprint')">Sprint</button>
        <button class="subTablinks" id="MountainTabButton"onclick="openSubTab(event, 'mountain')">King of the Mountain</button>
    </div>

    <!-- Sub-tab content (IDs and classes are inside each included file) -->
    {% include 'scoreboard/classement.html' %}
    {% include 'scoreboard/sprint.html' %}
    {% include 'scoreboard/mountain.html' %}
</div>

<!-- Stages Tab Content -->
<div id="stages" class="tabcontent" style="display:none;">
    {% include 'scoreboard/stage_selector.html' %}
    {% include 'scoreboard/stage_tab.html' %}
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Log to confirm that the page is loaded and the script is executing
        console.log("DOMContentLoaded event triggered.");

        // Function to log the event trigger when the 'Classement' sub-tab is opened
        function onClassementTabOpened(event) {
            console.log("Tab clicked:", event.target); // Log which element was clicked
            if (event.target && event.target.id === "classementTabButton") {
                // Log the event trigger
                console.log("Event triggered: Classement tab opened.");
            }
        }

        // Attach the event listener to the parent div that contains the sub-tab buttons
        const tabContainer = document.querySelector(".tab");  // .tab is the parent container for the sub-tabs

        // Ensure the parent container exists before adding the event listener
        if (tabContainer) {
            tabContainer.addEventListener("click", onClassementTabOpened);
        }
    });
</script>
{% endblock %}
